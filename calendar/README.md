# Calendar

[Technical task](https://github.com/OtusGolang/home_work/blob/master/hw12_13_14_15_calendar/docs/CALENDAR.MD)

## Usage

To update dependencies, run tests and lint:
```bash
make
```

### Other make commands

* `bootstrap` - download golangci-lint, if it is not exists
* `lint` - run golangci linter
* `test` - run all tests
* `vendor` - actualize and update dependencies

## ДЗ 11 GRPC сервис

Цель: Создать GRPC API для сервиса календаря.  

* Создать отдельную директорию для Protobuf спек.
* Создать Protobuf спеки с описанием всех методов API, их объектов запросов и ответов.
    Т.к. объект Event будет использоваться во многих ответах разумно выделить его в отдельный message.
* Создать отдельный директорию для кода GRPC сервера
* Сгенерировать код GRPC сервера на основе Protobuf спек (скрипт генерации сохранить в репозиторий).
* Написать код, связывающий GRPC сервер с методами доменной области.

Критерии оценки: 
1. Все методы должны быть реализованы
1. Бизнес логика (пакет internal/domain в примере) НЕ должен зависеть от кода GRPC сервера
1. GRPC-сервер должен запускаться на порту указанном в конфиге и выводить в лог каждый обработанный запрос.
1. Код должен проходить проверки go vet и golint
1. У преподавателя должна быть возможность заново сгенерировать код по Protobuf спекам
1. У преподавателя должна быть возможность скачать и установить пакет с помощью go get / go install 

## ДЗ 10 Конфигурирование микросервиса

Цель: Дополнить "каркас" микросервиса логикой считывания конфига из файла с последующим созданием 
логгеров с указанными уровнями детализации. Необходимо доработать код сервиса "Календарь" из 
предыдущего задания, добавив в него:
 
* Обработку аргументов командной строки
* Чтение файла конфигурации (параметр --config в командной строке)
* Создание логгеров и настройка уровня логирования
* Создание и запуск hello-world web-сервера
 
Параметры, передаваемые через аргументы командной строки:
* --config - путь к конфигу
 
Параметры, которые должны быть в конфиге:
* http_listen - ip и port на котором должен слушать web-сервер
* log_file - путь к файлу логов
* log_level - уровень логирования (error / warn / info / debug)
 
Критерии оценки: 
 
1. Web-сервер на данном этапе может быть не связан с бизнес логикой календаря и должен 
 обрабатывать только URL /hello  
1. Web-сервер должен запускаться на ip:port указанном в конфиге и каждый обработанный 
 запрос должен выводиться в log-файл. 
1. Код должен проходить проверки go vet и golint
1. У преподавателя должна быть возможность скачать и установить пакет с помощью go get / go install
1. В репозитории должен быть образец конфига 
1. Установленный сервис должен запускаться 

## ДЗ 9 "Заготовка" для микросервиса "Календарь"

Цель: В результате выполнения ДЗ должен получиться базовый скелет микросервиса, 
который будет развиваться в дальнейших ДЗ. 

В данном задании тренируются навыки: 
- декомпозиции предметной области; 
- построения элементарной архитектуры проекта.

1. Завести в репозитории отдельную директорию для проекта "Календарь" с отдельным go.mod.
1. Создать интерфейс хранилища событий, состоящий из методов для работы с ним:
    - добавление событий в хранилище
    - удаление событий из хранилища
    - изменение событий в хранилище
    - листинг событий
    - пр. на усмотрение студента
1. Создать объекты ошибок (error sentinels) соответствующие бизнес ошибкам, например 
ErrDateBusy - данное время уже занято другим событием.
1. Создать структуру, реализующую интерфейс выше логикой хранения событий в памяти 
(т.е. просто складывать объекты в мапы/слайсы).
1. Реализовать unit-тесты проверяющие работу хранилища (в частности ошибки).
1. Создать структуру календаря, использующую в себе хранилище. Календарь конструируется в main 
(в последствии он превратится в GRPC/HTTP-листенер).

На данном этапе не нужно (всё это будет позже):
- Делать HTTP, GRPC и пр. интерфейсы к микросервису
- Писать .proto-файлы
- Использовать СУБД

Проект должен следовать:
- https://github.com/golang-standards/project-layout
- https://golang.org/doc/effective_go.html#package-names
- https://rakyll.org/style-packages/

Архитектуры, откуда можно почерпнуть полезное (но необязательно):
- https://medium.com/@benbjohnson/standard-package-layout-7cdbc8391fc1#.epus9ggex
- пакетно-ориентированный дизайн (package-oriented design)
- чистая архитектура (clean architecture)

Важно понять, что в Go нет серебряной пули по архитектуре.
Понятия выше могут дать полезные концепции, но не стоит слепо следовать им.
Критерии оценки: Критерии оценки:
- Проект разбит на пакеты по определенной логике
- Созданы структуры, необходимые для реализации календаря
- Работа с хранилищем происходит через интерфейс
- Присутствуют юнит-тесты
Код должен проходить проверки go vet и golint.
У преподавателя должна быть возможность скачать и проверить пакет с помощью go get / go test. 
